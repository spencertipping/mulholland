caterwaul.module( 'mulholland.parser' ,function($) {$.mulholland.parser=function() {var table= { } ;
var table_i= { } ;
var next=0;
return(function( ) {var parser=function(_) {return parse(lex(sdoc(_.toString() ) ) ) } ,syntax=$.mulholland.syntax(parser) ,statics=function() {;
return{syntax:syntax,intern:intern,extern:extern,lex:lex,precedence:precedence,right_associative:right_associative} } ,sdoc=function(s) {;
return(function(it) {return(it.join( '\n\n' ) ) } ) .call(this, ( (function(xs) {var x,x0,xi,xl,xr;
for(var xr=new xs.constructor() ,xi=0,xl=xs.length,x0;
xi<xl;
 ++xi)x=xs[xi] , ( /^\s*[A-Z|]/ .test(x) ) ||xr.push(x) ;
return xr} ) .call(this,s.split( /\n(?:\s*\n)+/ ) ) ) ) } ,lexer= /(#.*|(?:[_@\w\x7f-\uffff]|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*")[^ \n\t\r.:,;()\[\]{}]*|[^ \n\t\r.:,;()\[\]{}][^ \n\t\r()\[\]{}]*|[()\[\]{}]|[.:,;][^ \n\t\r\d\w@]*)/ ,lex=function(s) {;
return(function(xs) {var x,x0,xi,xl,xr;
for(var xr=new xs.constructor() ,xi=0,xl=xs.length,x0;
xi<xl;
 ++xi)x=xs[xi] , ( /^[^ \n\t\r#]/ .test(x) ) &&xr.push(x) ;
return xr} ) .call(this,s.split(lexer) ) } ,intern=function(s) {;
return Object.prototype.hasOwnProperty.call(table_i,s) ?table_i[s] :table_i[table[next] =s] =next++ } ,extern=function(n) {;
return Object.prototype.hasOwnProperty.call(table,n) ?table[n] :n} ,base_operators= (function(xs) {var x,x0,xi,xl,xr;
for(var xr=new xs.constructor() ,xi=0,xl=xs.length;
xi<xl;
 ++xi)x=xs[xi] ,xr.push( (new RegExp( ( '^' + (x) + '' ) ) ) ) ;
return xr} ) .call(this, [ '\\.' , '[`~]' , '#' , '!' , '[/*%]' , '[\\\\:]' , '[-+]' , '[<>]' , '&' , '\\$' , '[|^]' , '[=?]' , ',' , ';' , '[(\[{]' ] ) ,right_associative=function(_) {return/^[$\\:!<>`~=?(\[{]/ .exec(_) } ,shading= (function(xs) {var x,x0,xi,xl,xr;
var xr=new xs.constructor() ;
for(var k in xs)if(Object.prototype.hasOwnProperty.call(xs,k) )x=xs[k] ,xr[k] = ( -x) ;
return xr} ) .call(this, { '~' : '1' , '*' : '1' , ':' : '1' , '+' : '1' , '>' : '1' , '^' : '1' , '?' : '1' , '%' : '-1' } ) ,precedence=function(t) {;
return/\w/ .test(t) &&shaded_precedence(t.charAt(t.length-1) ) ||unshaded_precedence(t.charAt(0) ) } ,unshaded_precedence=function(c) {;
return(function(xs) {var x,x0,xi,xl,xr;
for(var x=xs[0] ,xi=0,xl=xs.length,x3;
xi<xl;
 ++xi) {x=xs[xi] ;
if(x3= (x.test(c) &&xi+1<<2) )return x3}return false} ) .call(this,base_operators) } ,shaded_precedence=function(c) {;
return unshaded_precedence(c) + ( (shading[c] ) || (0) ) } ,operator_semantic=function(t) {;
return/\w/ .test(t) ?t.replace( /\W$/ , '' ) :t} ,node=function(op,x2,x1) {;
return new syntax(op, [x1,x2] ) } ,is_unary=function(op) {;
return/\w/ .test(op) ? /[!]$/ .test(op) : /^[!]/ .test(op) } ,opens_a_group=function(t) {;
return/^[(\[{]/ .test(t) } ,is_value=function(t) {;
return/^['"_@A-Za-z0-9\x7f-\uffff]/ .test(t) } ,closes_a_group=function(t) {;
return/^[)\]}]/ .test(t) } ,parse=function(ts) {;
return(function( ) {var expect_value=true,output= [ ] ,operator_stack= [ ] ,op=function() {;
return operator_stack[operator_stack.length-1] } ,defer=function(op) {;
return(operator_stack) .push(op) } ,use=function(op) {;
return is_unary(op) ? (output) .push(new syntax(intern(operator_semantic(op) ) , [output.pop() ] ) ) : (output) .push(node(intern(operator_semantic(op) ) ,output.pop() ,output.pop() ) ) } ,pop=function() {;
return use(operator_stack.pop() ) } ,pop_until=function(f) {;
return(function(xs) {var x,x0,xi,xl,xr;
for(var x=xs,xi=0,x0,xl;
x0= (operator_stack.length&& !f(op() ) ) ;
 ++xi)x= (pop() ) ;
return x} ) .call(this,null) } ,route=function(t) {;
return is_unary(t) ? (function(it) {return( (operator_stack) .push(t) ) } ) .call(this, ( ( (expect_value!== (expect_value=true) ) && (operator( '#' ) ) ) ) ) :is_value(t) ? (function(it) {return( (output) .push(new syntax(intern(t) ) ) ) } ) .call(this, ( ( (expect_value=== (expect_value=false) ) && (operator( '#' ) ) ) ) ) :expect_value= ! !decide(t) } ,operator=function(o) {;
return(function(it) {return( (operator_stack) .push(o) ) } ) .call(this, (pop_until(right_associative(o) ?function(_) {return precedence(_) >=precedence(o) } :function(_) {return precedence(_) >precedence(o) } ) ) ) } ,decide=function(o) {;
return closes_a_group(o) ? (pop_until(opens_a_group) ,op() === '(' ? !operator_stack.pop() : !output.push(new syntax(intern(operator_stack.pop() ) , [output.pop() ] ) ) ) :opens_a_group(o) ? ( ( (expect_value!== (expect_value=true) ) && (operator( '#' ) ) ) , (operator_stack) .push(o) ) :operator(o) } ,pop_everything=function() {;
return(function(it) {return(output[0] ) } ) .call(this, (pop_until(function(_) {return operator_stack.length===0} ) ) ) } ;
return( (function(it) {return(pop_everything() ) } ) .call(this, ( (function(xs) {var x,x0,xi,xl,xr;
for(var xi=0,xl=xs.length;
xi<xl;
 ++xi)x=xs[xi] , ( (route) .call( {x0:x0,xi:xi,xl:xl,xs:xs,xr:xr} ,x) ) ;
return xs} ) .call(this,ts) ) ) ) } ) .call(this) } ;
return($.merge(parser,statics() ) ) } ) .call(this) } } ) ;
