caterwaul.module( 'mulholland.mh' ,function($) { (function( ) {var parse=$.mulholland() ,rewrite_form=parse( '_x /@ _y' ) ,js=$.mulholland.js(parse) ,rewrite=function(match) {;
return match&&toplevel_rewriter.extend(toplevel_rewriter(match._y) .flatten_all( ',' ) ) (match._x) } ,read_file=function(f) {;
return require( 'fs' ) .readFileSync(f, 'utf8' ) } ,toplevel_rewriter=$.mulholland.rewriter( [ [rewrite_form,rewrite] ] ) ;
return($.mulholland.mh_main=function(argv) {;
return argv.length? (function(xs) {var x,x0,xi,xl,xr;
for(var xi=0,xl=xs.length;
xi<xl;
 ++xi)x=xs[xi] , ( (output) .call( {x0:x0,xi:xi,xl:xl,xs:xs,xr:xr} ,x) ) ;
return xs} ) .call(this, (function(xs) {var x,x0,xi,xl,xr;
for(var xr=new xs.constructor() ,xi=0,xl=xs.length;
xi<xl;
 ++xi)x=xs[xi] ,xr.push( ( (execute) .call( {x0:x0,xi:xi,xl:xl,xs:xs,xr:xr} ,x) ) ) ;
return xr} ) .call(this, (function(xs) {var x,x0,xi,xl,xr;
for(var xr=new xs.constructor() ,xi=0,xl=xs.length;
xi<xl;
 ++xi)x=xs[xi] ,xr.push( ( (read_file) .call( {x0:x0,xi:xi,xl:xl,xs:xs,xr:xr} ,x) ) ) ;
return xr} ) .call(this,argv) ) ) :$.mulholland.mh_repl(argv) } ,$.mulholland.mh_repl=function(argv) {;
return(function( ) {var evaluator=function(s,_1,_2,cc) {;
return(function( ) {try{return(cc(null,$.mulholland.mh(s) .structure() ) ) }catch(e) {return(cc(e,undefined) ) } } ) .call(this) } ;
return(require( 'repl' ) .start( 'mh> ' ,undefined,evaluator) ) } ) .call(this) } ,$.mulholland.mh=function(source) {;
return toplevel_rewriter(parse(source) ) } ) } ) .call(this) } ) ;
